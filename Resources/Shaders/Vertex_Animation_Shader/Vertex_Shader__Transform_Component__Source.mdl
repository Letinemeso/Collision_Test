"

layout(std430, binding = 0) buffer Vertex_Data__Coords
{
    float positions[];
};

vec3 get_position()
{
    vec3 result = vec3(0.0f, 0.0f, 0.0f);
    for(uint i = 0; i < 3; ++i)
    {
        result[i] += positions[vertex_index * 3 + i] * (1.0f - mix_ratio);
        result[i] += positions[next_frame_vertex_index * 3 + i] * mix_ratio;
    }

    return result;
}

uniform mat4 projection_matrix;
uniform mat4 transform_matrix;

out vec3 fs_in_position;


void process_transform()
{
    if(mix_ratio < 0.0f)
        return;

    vec3 position = get_position();

    vec4 world_pos = transform_matrix * vec4(position, 1.0f);

    fs_in_position = world_pos.xyz;
    gl_Position = projection_matrix * world_pos;
}

"
