"

layout(std430, binding = 2) buffer Vertex_Data__Normals
{
    float normals[];
};

vec3 get_normal()
{
    vec3 result = vec3(0.0f, 0.0f, 0.0f);
    for(uint i = 0; i < 3; ++i)
    {
        result[i] += normals[vertex_index * 3 + i] * (1.0f - mix_ratio);
        result[i] += normals[next_frame_vertex_index * 3 + i] * mix_ratio;
    }

    return normalize(result);
}

out vec3 fs_in_normal;


void process_normals()
{
    vec4 rotated_normal = rotation_matrix_uniform * vec4(get_normal(), 1.0f);
    fs_in_normal = rotated_normal.xyz;
}

"
